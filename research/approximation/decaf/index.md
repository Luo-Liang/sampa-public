---
layout: default
title: "DECAF: Probability Types"
---
Approximate computing needs programming systems that can bound the chance that a result will be wrong. DECAF (**D**ECAF, an **E**nergy-aware **C**ompiler to make **A**pproximation **F**lexible) is a language that uses *probability types* to control incorrectness.

### Paper

*Probability Type Inference for Flexible Approximate Programming.*
Brett Boston, [Adrian Sampson][adrian], [Dan Grossman][dan], and [Luis Ceze][luis].
To appear in OOPSLA 2015.

Link TK.

[adrian]: http://homes.cs.washington.edu/~asampson/
[dan]: http://homes.cs.washington.edu/~djg/
[luis]: http://homes.cs.washington.edu/~luisceze/

## Source Code

The source code for the compiler, simulator, and benchmarks is available for download. The compiler and simulator are modified versions of the [EnerJ infrastructure][enerj-source]. You will need three bundles of source code in total:

* [The `enerj` directory][tarball-enerj], which contains the compiler and simulator.
* [The `checker-runtime` directory][tarball-cfrt], a support library.
* [The `approx-within-apps` directory][tarball-apps], the annotated benchmarks and associated scripts for collecting data.

[enerj-source]: /research/approximation/enerj.html#source-release
[tarball-enerj]: enerj-802f7e4a1e1c.tar.gz
[tarball-cfrt]: checker-runtime-a8a1e794bb86.tar.gz
[tarball-apps]: approx-within-apps-f55f9c0.tar.gz

### Building

To build the system, follow [the instructions for building EnerJ][enerj-readme] with the following differences:

* Use version 1.8.0 of the Checker Framework. (The original EnerJ compiler uses an older version.)
* You will need [Z3][]. We used version 4.3.1 in our experiments.

[enerj-readme]: https://bitbucket.org/adrian/enerj
[z3]: https://github.com/Z3Prover/z3

## Result Data

The main results in the DECAF paper consist of the frequency of different "probability levels" among the operations in the benchmarks. In the paper, the data is shown in Figure 3. The full details for these counts are compiled in the file [`level_breakdown.json`][level_breakdown].

The data file is a JSON document containing an object whose keys are the benchmarks in the evaluation. Each benchmark is associated with an object with these keys:

* The numbers 2 through 9: These reflect the 8 machine architecture configurations we studied, each with a different number (from 2 to 9) of discrete probability levels for each operation. The JSON object for each of these keys gives the proportion of dynamic operations that ran at each probability level.
* "continuous": A similar object reflecting an idealized machine with *no* discrete probability levels, i.e., the DECAF compiler is free to choose arbitrary distinct probabilities for every operation in the program.
* "asterisks": By default, the discrete-level configurations are generated by a version of DECAF configured to *solve* for the hardware profile a priori. When this is intractable, we fall back to *rounding* after the fact. The "asterisks" list indicates the configurations where this fallback occurred. It corresponds to the asterisks along the x-axis in Figure 3.

[level_breakdown]: level_breakdown.json
